<?php
// ====== LOGIC FORMAT ======
if(substr($validity,-1) == "d"){
  $validity = "Aktif:".substr($validity,0,-1)." Hari";
}elseif(substr($validity,-1) == "h"){
  $validity = "Aktif:".substr($validity,0,-1)." Jam";
}

if(substr($timelimit,-1) == "d" && strlen($timelimit) > 3){
  $timelimit = "Durasi:".((substr($timelimit,0,-1)*7) + substr($timelimit, 2,1))." Hari";
}elseif(substr($timelimit,-1) == "d"){
  $timelimit = "Durasi:".substr($timelimit,0,-1)." Hari";
}elseif(substr($timelimit,-1) == "h"){
  $timelimit = "Durasi:".substr($timelimit,0,-1)." Jam";
}elseif(substr($timelimit,-1) == "w"){
  $timelimit = "Durasi:".(substr($timelimit,0,-1)*7)." Hari";
}

// ====== WARNA BERDASARKAN HARGA ======
if($getsprice == "1000"){ $color = "orange"; }
elseif($getsprice == "3000"){ $color = "orange"; }
elseif($getsprice == "5000"){ $color = "orange"; }
else{ $color = "orange"; }
?>

<style type="text/css">
body {
  font-family: "Segoe UI", Arial, sans-serif;
  background-color: #f5f5f5;
  padding: 20px;
}

/* Semua border sama dan rapat */
table.voucher {
  border-collapse: collapse;
  border: 2px solid #000; /* lebih tegas tapi tidak terlalu tebal */
  width: 230px;
  background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
table.voucher td {
  border: 1.5px solid #000;
  padding: 3px;
  vertical-align: middle;
  text-align: center;
}

/* Tulisan harga vertikal */
.rotate {
  vertical-align: middle;
  text-align: center;
  color: #000; /* teks hitam */
  font-weight: bold;
  font-size: 16px;
}
.rotate span {
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  white-space: nowrap;
}

/* QR Code lebih besar */
.qrcode {
  height: 90px;
  width: 90px;
  display: block;
  margin: auto;
}

/* Warna tetap tercetak */
.print-bg {
  background-color: <?= $color ?>;
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
}
</style>

<table class="voucher">
  <tbody>
    <tr>
      <td class="rotate print-bg" rowspan="4">
        <span><?= $price; ?></span>
      </td>
      <td colspan="2" style="font-weight: bold; font-size: 14px;"><?= $hotspotname; ?></td>
      <?php if ($qr == "yes") { ?>
        <td rowspan="3"><?= $qrcode ?></td>
      <?php } else { ?>
        <td rowspan="3">
          <img class="qrcode" src="<?= $logo ?>" alt="logo">
        </td>
      <?php } ?>
    </tr>

    <tr>
      <?php if ($usermode == "vc") { ?>  
        <td colspan="2" style="font-weight: bold; font-size: 18px;"><?= $username; ?></td>
      <?php } elseif ($usermode == "up") { ?>
        <td colspan="2" style="font-weight: bold; font-size: 15px;">
          <?= "User: " . $username . "<br>Pass: " . $password; ?>
        </td>
      <?php } ?>  
    </tr>

    <tr>
      <td colspan="2" style="font-size: 11px; color: #555;"><?= $validity; ?> &nbsp; <?= $timelimit; ?> &nbsp; <?= $datalimit; ?></td>
    </tr>

    <tr>
      <td colspan="3" style="font-size: 11px; color: #333;">
        Login: http://<?= $dnsname; ?> <span style="color:#888;">[<?= $num ?>]</span>
      </td>
    </tr>
  </tbody>
</table>
