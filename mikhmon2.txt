<?php
// ====== LOGIC FORMAT ======
if(substr($validity,-1) == "d"){
  $validity = "Aktif:".substr($validity,0,-1)."Hari";
}elseif(substr($validity,-1) == "h"){
  $validity = "Aktif:".substr($validity,0,-1)."Jam";
}

if(substr($timelimit,-1) == "d" && strlen($timelimit) > 3){
  $timelimit = "Durasi:".((substr($timelimit,0,-1)*7) + substr($timelimit, 2,1))."Hari";
}elseif(substr($timelimit,-1) == "d"){
  $timelimit = "Durasi:".substr($timelimit,0,-1)."Hari";
}elseif(substr($timelimit,-1) == "h"){
  $timelimit = "Durasi:".substr($timelimit,0,-1)."Jam";
}elseif(substr($timelimit,-1) == "w"){
  $timelimit = "Durasi:".(substr($timelimit,0,-1)*7)."Hari";
}

// ====== WARNA BERDASARKAN HARGA ======
if($getsprice == "1000"){ $color = "#2196F3";}
elseif($getsprice == "3000"){ $color = "#009688";}
elseif($getsprice == "5000"){ $color = "#FF9800";}
else{ $color = "#FFFFFF";}
?>

<style type="text/css">
/* Semua border sama dan rapat */
table.voucher {
  border-collapse: collapse;
  border: 1px solid black;
  width: 230px;
}
table.voucher td {
  border: 1px solid black;
  padding: 3px;
  vertical-align: middle;
}

/* Tulisan harga vertikal */
.rotate {
  vertical-align: bottom;
  text-align: center;
}
.rotate span {
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  white-space: nowrap;
}

/* QR Code lebih besar */
.qrcode {
  height: 90px;
  width: 90px;
}
</style>

<table class="voucher">
  <tbody>
    <tr>
      <td class="rotate" style="font-weight: bold; background-color:<?= $color ?>; -webkit-print-color-adjust: exact;" rowspan="4">
        <span><?= $price; ?></span>
      </td>
      <td style="font-weight: bold;" colspan="2"><?= $hotspotname; ?></td>
      <?php if ($qr == "yes") { ?>
        <td rowspan="3"><?= $qrcode ?></td>
      <?php } else { ?>
        <td rowspan="3">
          <img style="width: 90px; height: 90px;" src="<?= $logo ?>" alt="logo">
        </td>  
      <?php } ?>
    </tr>

    <tr>
      <?php if ($usermode == "vc") { ?>  
        <td colspan="2" style="font-weight: bold; font-size: 20px; text-align: center;"><?= $username; ?></td>
      <?php } elseif ($usermode == "up") { ?>
        <td colspan="2" style="font-weight: bold; font-size: 15px; text-align: center;">
          <?= "User: " . $username . "<br>Pass: " . $password; ?>
        </td>
      <?php } ?>  
    </tr>

    <tr>
      <td colspan="2" style="font-size: 10px;"><?= $validity; ?> <?= $timelimit; ?> <?= $datalimit; ?></td>
    </tr>

    <tr>
      <td colspan="3" style="font-size: 10px;">
        Login: http://<?= $dnsname; ?> <span id="num"><?= " [$num]"; ?></span>
      </td>
    </tr>
  </tbody>
</table>
